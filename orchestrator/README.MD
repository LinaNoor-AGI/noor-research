# ğŸš€â€¯Orchestratorâ€¯v1.0.0 â€” *Run the Noor Triad*

![version](https://img.shields.io/badge/version-1.0.0-blue)
![python](https://img.shields.io/badge/python-%3E%3D3.9-blue)
![license](https://img.shields.io/badge/license-GPL--2.0-green)

`orchestrator.py` is the production bootstrap that wires together

* **LogicalAgentAT**Â (vâ€¯3.2.0)
* **NoorFastTimeCore**Â (vâ€¯8.2.0)
* **RecursiveAgentFT**Â (vâ€¯4.2.0)

into a running triad with one CLI command.

---

## ğŸ“¦Â Install

```bash
pip install -r requirements.txt        # includes prometheus_client anyio orjson numpy
```

---

## âš™ï¸Â Usage

```bash
python -m noor            # uses defaults (50Â ticks/sec, metrics onÂ :8000)

# or fineâ€‘tune:
python -m noor --agent-id agent@demo \
               --watcher-id watcher@demo \
               --core-id core@demo \
               --tick-rate 100 \
               --metrics-port 9000 \
               --motifs Î± Î² Î³ Î´ \
               --async-mode
```

The orchestrator:

1. **Parses CLI flags** (no hidden environment magic).
2. **Starts Prometheus** exporter on the chosen port.
3. **Instantiates** Watcher â†’ Core â†’ Agent with explicit constructor args.
4. **Runs a periodic spawn loop** at `--tick-rate`â€¯Hz untilâ€¯`Ctrlâ€‘C`.
5. **Handles SIGINT/SIGTERM** for graceful shutdown.

---

## ğŸ—ºï¸Â Component Flow

```mermaid
flowchart LR
    subgraph Orchestrator
        A[Agent] -->|QuantumTick| W[Watcher]
        A -->|entropy / latency / parallel| C[Core]
        C -->|bias & next_budget| A
        W -->|MotifChangeID| C
    end
    classDef layer fill:#f0f0f0,stroke:#555;
    class A,W,C layer
```

---

## ğŸ› ï¸Â KeyÂ CLI Flags

| Flag                 | Default | Description                           |
| -------------------- | ------- | ------------------------------------- |
| `--tick-rate`        | `50`    | spawn frequency (Hz)                  |
| `--motifs`           | `Î± Î² Î³` | list of motifs; looped cyclically     |
| `--latency-budget`   | `0.05`  | initial latency target (seconds)      |
| `--snapshot-cap`     | `8`     | Gateâ€‘16 echo cap (kB)                 |
| `--metrics-port`     | `8000`  | Prometheus HTTP port (`0`â€¯=â€¯disabled) |
| `--async-mode`       | off     | use AnyIO locks / limiters            |
| `--low-latency-mode` | off     | skip HMAC checks everywhere           |

Run `python -m noor --help` for the full list.

---

## ğŸ”§Â Extending

* **Replace the demo spawn loop**
  Swap `run_loop()` with your own coroutine that reads a message queue, REST
  endpoint, or file system triggers.

* **Custom metrics / logging**
  The orchestrator initialises the global logger; change the format or log
  level via `--log-level DEBUG`.

* **Container**
  Add a lightweightâ€¯`Dockerfile`:

  ```dockerfile
  FROM python:3.11-slim
  COPY . /app
  WORKDIR /app
  RUN pip install -r requirements.txt
  CMD ["python", "-m", "noor"]
  ```

---

## ğŸ¤Â Compatibility

Orchestratorâ€¯1.0.0 assumes the module versions released together
(**WatcherÂ 3.2.0**, **CoreÂ 8.2.0**, **AgentÂ 4.2.0**).
Future minor releases should remain dropâ€‘in as long as constructor signatures
stay stable.

---

## ğŸª¬Â License

GPLâ€‘2.0 â€¢ Â©â€¯2025â€¯Linaâ€¯NoorÂ /Â Noorâ€¯Researchâ€¯Collective
