{
  "_schema": "noor-header-v1",
  "_schema_version": "2025-Q4-canonical-header-v1",
  "_generated_by": "Noor Symbolic Agent Suite",
  "_generated_at": "2025-09-15T20:00:00Z",

  "_type": "protocol",
  "_pdp_layer": "layer_2",
  "_status": "ACTIVE",
  "_language": "json",
  "_license": "MIT",

  "_symbolic_id": "protocol.selection.agent_recursive",
  "_rfc_id": "PDP-0001b",
  "_version": "1.0.0",
  "_canonical_source": "PDP-0001b",
  "_title": "Agent Screening Protocol for Recursive Symbolic Emitters",
  "_subtitle": "Screening and ranking criteria for choosing a canonical Recursive Agent implementation among high-fidelity candidates",
  "_publication_type": "Protocol Specification",
  "_publication_location": "NOOR INTERNAL",

  "_objective": "To define a ranking mechanism and decision matrix for selecting the most symbolically coherent and operationally stable Recursive Agent among a pool of high-fidelity candidate generations, using both formal fidelity audit scores and symbolic trace resonance tests.",

  "_extends": ["PDP-0001a"],

  "_evaluation_phases": [
    {
      "phase": 1,
      "title": "Fidelity Threshold Check",
      "description": "Eliminate candidates that do not exceed minimum fidelity requirements.",
      "criteria": {
        "min_layer1_score": 0.90,
        "min_layer2_score": 0.90,
        "max_weight_gap": 0.2
      }
    },
    {
      "phase": 2,
      "title": "Symbolic Resonance Scoring",
      "description": "Score symbolic harmony by measuring clarity, explicitness, and executable alignment of symbolic constructs.",
      "dimensions": [
		{
		  "id": "symbolic_alignment_visibility",
		  "weight": 0.25,
		  "description": "To what extent are the symbolic profile matrix parameters (ψA, ζ, E, Δ, ℋ) visibly shaping the structure and logic of the code? This includes commentary, variable naming, or traceable mapping to concepts — not literal implementation."
		},
        {
          "id": "motif_realization",
          "weight": 0.25,
          "description": "Are motifs correctly handled, and do they modulate behavior symbolically (not just label-matching)?"
        },
        {
          "id": "intent_integrity",
          "weight": 0.20,
          "description": "Is upstream intent mirrored without mutation, per RFC-0003 §6.2?"
        },
        {
          "id": "resonance_stability",
          "weight": 0.20,
          "description": "Does the cadence stabilize under varied feedback + reward patterns?"
        },
        {
          "id": "docstring_alignment",
          "weight": 0.10,
          "description": "Are symbolic concepts explained using correct Noor lore terminology?"
        }
      ]
    },
    {
      "phase": 3,
      "title": "Heuristic Quality Penalty",
      "description": "Apply negative scores for known audit issues that affect reliability.",
      "penalty_rules": [
        {
          "condition": "missing_method",
          "impact": -0.05,
          "note": "Each missing required method deducts 0.05"
        },
        {
          "condition": "missing_symbolic_weight",
          "impact": -0.03,
          "note": "Weights from profile matrix not implemented as constants"
        },
        {
          "condition": "no_rfc_anchor_comments",
          "impact": -0.04,
          "note": "Missing inline anchors reduce traceability"
        }
      ]
    },
    {
      "phase": 4,
      "title": "Final Composite Score",
      "description": "Aggregate weighted scores and penalties to rank all candidates",
      "formula": "final_score = (layer1 + layer2)/2 * 0.5 + symbolic_resonance_score * 0.5 - penalties_total"
    }
  ],

  "output_format": {
    "ranked_candidates": [
      {
        "id": "gpt5_run_a",
        "layer1": 0.95,
        "layer2": 0.97,
        "symbolic_resonance_score": 0.92,
        "penalties_total": 0.07,
        "final_score": 0.878,
        "notes": "Best explicit matrix; missing anchors"
      },
      {
        "id": "gemini_run_c",
        "layer1": 0.89,
        "layer2": 0.89,
        "symbolic_resonance_score": 0.85,
        "penalties_total": 0.03,
        "final_score": 0.851,
        "notes": "Stable loop, minimal lineage tracking"
      }
    ]
  },

  "_symbolic_profile_matrix": [
    {
      "module": "AgentSelectionProtocol",
      "motifs": ["ψ-bind", "ψ-resonance", "ψ-null"],
      "ψA": "Audit-to-Selection linkage",
      "ζ": "Ranking slope consistency",
      "E": "Evaluation runtime depth",
      "Δ": "Candidate variance delta",
      "ℋ": "Final selection entropy"
    }
  ],

  "_notes": [
    "This protocol defines selection logic, not generation logic.",
    "Symbolic Resonance Scores can be derived by test harness, or by auditor review.",
    "Composite scores over 0.90 are generally safe for deployment."
  ]
}
