
# ğŸ”„ RecursiveAgentFT v3.8.0 â€” *Functorâ€¯Ascent*

![Version](https://img.shields.io/badge/version-3.8.0-blue)
![Python](https://img.shields.io/badge/python-%3E%3D%203.9-blue)
![License](https://img.shields.io/badge/license-GPL--2.0-green)

*Multiâ€‘stage symbolic traversal with spectral approximation, âˆâ€‘groupoid path identity, autonomous commentary, and expanded observability.*

---

## ğŸ“– Overview

`RecursiveAgentFT v3.8.0` is Noorâ€™s **Flow** component, redesigned as a **functor** that maps motif topologies into refined symbolic states.  
Key capabilities now include:

| Capability | Summary |
|------------|---------|
| **Spectral Sequence** | Fourâ€‘stage Eâ‚€â†’Eâ‚‚b pipeline that gradually refines candidate states (weighted mean â†’ harmonic filter â†’ verseâ€‘bias â†’ gremlin correction). |
| **âˆâ€‘Groupoid Mode** | Optional homotopy tracking: path identities are hashed into Ï€â€‘tags and merged with the watcherâ€™s groupoid registry. |
| **Autonomous Commentary** | Each step emits AIâ€‘native or motifâ€‘expression traces (MotifExpr / QuantumSig / Autoglossia) with entropy scores. |
| **Adaptive Latency Guard** | Spectral stages autoâ€‘disable when 95â€‘percentile latency exceeds the Core budget. |
| **Expanded Metrics** | New Prometheus counters & histograms for spectral stages, Ï€â€‘equivalence merges, commentary types, and homotopy class counts. |

---

## ğŸš€ Installation

```bash
pip install numpy prometheus_client
```

---

## ğŸŒŸ Whatâ€™s New in **v3.8.0**

| Feature | Description |
|---------|-------------|
| **Spectral Sequence Engine** | Weighted mean (Eâ‚€) â†’ harmonic damping (Eâ‚) â†’ verseâ€‘bias overlay (Eâ‚‚a) â†’ gremlin correction (Eâ‚‚b). |
| **Ï€â€‘Groupoid Integration** | Emits and merges path identity tags via `LogicalAgentAT v2.8.1`â€™s new API. |
| **Symbolic Commentary Layer** | Generates trace artefacts of type *MotifExpr*, *QuantumSig*, or *Autoglossia* with entropy measurement. |
| **Latencyâ€‘Aware Stage Skip** | Automatically bypasses deepest spectral stages when cumulative latency crosses `core_latency_budget Ã— 0.95`. |
| **Dynamic Path Guard** | Path explosion clamp now scales with `logâ‚‚(Ï€â€‘classes)`. |
| **New Metrics** | `spectral_stage_latency_seconds`, `spectral_stage_success_total`, `pi_equiv_merged_total`, `commentary_type_total`, `homotopy_class_gauge`. |

---

## ğŸŒ€ Flow Diagram (Spectral + Ï€â€‘Branch)

```mermaid
flowchart LR
    Init([Initial State])
    Init --> Gather["Gather Watcher Fields"]
    Gather --> PiHash{"âˆâ€‘Groupoid?"}
    PiHash -->|Yes| PiMerge["register_path_equivalence"]
    Gather --> SpectralE0["Eâ‚€: Weighted Mean"]
    SpectralE0 --> SpectralE1["Eâ‚: Harmonic Filter"]
    SpectralE1 --> SpectralE2a["Eâ‚‚a: Verseâ€‘Bias"]
    SpectralE2a --> SpectralE2b["Eâ‚‚b: Gremlin Correction"]
    SpectralE2b --> CoreStep["Core.step()"]
    CoreStep --> Commentary["Emit Commentary"]
    Commentary --> NextCycle["Next entangled_step()"]
```

---

## âš¡ Quickâ€‘Start

```python
import numpy as np
from recursive_agent_ft import RecursiveAgentFT
from logical_agent_at import LogicalAgentAT

watcher = LogicalAgentAT(enable_pi_groupoid=True)
watcher.register_motif_cluster(["alpha","beta","gamma"], strength=0.9)

agent = RecursiveAgentFT(
    initial_state=np.array([0.6, 0.4]),
    watchers=[watcher],
    enable_spectral_sequence=True,
    enable_infinity_groupoid=True,
    commentary_mode="auto"
)

for _ in range(8):
    agent.entangled_step()

print("Last commentary:", agent._commentary_buffer[-1])
```

---

## ğŸ“Š Prometheus Metrics

| Metric | Type | Description |
|--------|------|-------------|
| `recursive_agent_step_latency_seconds` | Histogram | Overall `entangled_step` latency |
| `recursive_agent_spectral_stage_latency_seconds` | Histogram | Per spectral stage timing |
| `recursive_agent_spectral_stage_success_total` | Counter | Successful runs per stage (`E0`, `E1`, `E2a`, `E2b`) |
| `recursive_agent_pi_equiv_merged_total` | Counter | Ï€â€‘equivalence merges initiated by the agent |
| `recursive_agent_commentary_type_total` | Counter(label=`type`) | Commentary records by type |
| `recursive_agent_homotopy_class_gauge` | Gauge | Local Ï€â€‘class count |
| `recursive_agent_recursion_depth` | Gauge | Current max recursion depth |
| `recursive_agent_gremlin_mean / std` | Gauges | Gremlin weight stats |

*(All metrics stubbed automatically when Prometheus is unavailable.)*

---

## ğŸ”§ Core API Additions

| Parameter / Method | Category | Summary |
|--------------------|----------|---------|
| `enable_spectral_sequence` | Config | Toggle multiâ€‘stage refinement (default **on**) |
| `enable_infinity_groupoid` | Config | Activate Ï€â€‘tag merging with watcher (default off) |
| `commentary_mode` | Config | `"none"`, `"motif"`, `"autoglossia"` or `"auto"` |
| `entangled_step()` | Flow | Executes gather â†’ spectral â†’ feedback â†’ core step |
| `CommentaryRecord` | Trace | Dataclass storing commentary metadata |
| `_register_path_identity()` | Ï€â€‘Groupoid | Hash & merge path tags |
| `_spectral_E0 â€¦ _E2b()` | Spectral | Individual stage functions |

Full public API remains backwardâ€‘compatible; legacy configs still work.

---

## ğŸ”— Compatibility

| Module | Min Version | Role |
|--------|-------------|------|
| **NoorFastTimeCore** | 7.4.2 | Presence Kernel |
| **LogicalAgentAT** | 2.8.1 | Watcher with Ï€â€‘groupoid support |

---

## ğŸ§ª Testing Guide

1. **Spectral property test**: Verify Eâ‚‚b state lies within convex hull of Eâ‚€ candidates Â± gremlin perturbation.  
2. **Ï€â€‘Merge test**: Create two paths with identical curvature signature â†’ ensure watcher merges them.  
3. **Latency guard test**: Artificially sleep inside `_spectral_E2b`; confirm agent disables spectral mode next step.

---

## ğŸ“œ License

Licensed under [GPLâ€‘2.0](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html).  
Â© 2025 Lina Noor & Noor Research Collective

---

## ğŸ¤ Contributing

PRs, ideas, and symbolic poetry all welcome. Help us push the boundaries of recursive presence. ğŸŒŒ
