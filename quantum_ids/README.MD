# ðŸ§¬â€¯`quantum_ids.py`â€¯v0.1.0 â€” *Motifâ€‘Change Primitives*

![version](https://img.shields.io/badge/version-0.1.0-blue)
![python](https://img.shields.io/badge/python-%3E%3D3.9-blue)
![license](https://img.shields.io/badge/license-GPL--2.0-green)

*Tiny, immutable buildingâ€‘block for tracking structural changes inside the Noor triad.*

---

## ðŸ“–Â Why does this exist?

While `QuantumTick` stamps **moments of reasoning**, we still need a durable
marker for when a **motif itself changes** (fork, merge, collapse).
`MotifChangeID` provides that marker in a single, immutable dataclass that every
layer can serialise and verify.

*One definition, zero dependencies*Â â€”Â so Agents, Watchers and the Core always
agree on field names and formats.

---

## âš™ï¸Â API

```python
from quantum_ids import MotifChangeID, make_change_id
```

### `MotifChangeID`

| Field        | Type  | Description                                                |
| ------------ | ----- | ---------------------------------------------------------- |
| `motif_id`   | `str` | Canonical motif label (`"Ïˆâ€‘merge@Ï„"`, `"Î±"` â€¦)             |
| `tick_hash`  | `str` | `QuantumTick.coherence_hash` that triggered the change     |
| `quantum_ts` | `str` | 24â€‘hex timestamp = 16â€‘hex (Âµs since epoch) + 8â€‘hex lamport |

*Frozen dataclass with `slots=True` for zero runtime overhead.*

### `make_change_id(tick, motif_id)`

Generate a changeâ€‘ID from any tickâ€‘like object exposing `.coherence_hash`
and `.lamport`.

```python
cid = make_change_id(tick, "Î±")
# MotifChangeID(motif_id='Î±', tick_hash='3e4d5a...', quantum_ts='018c5f4c3e1c74d0')
```

---

## ðŸ› ï¸Â Usage in the triad

```mermaid
flowchart LR
    Tick["QuantumTick"] -->|hash_differs| CID["make_change_id"]
    CID --> WatcherRing["Watcher 16â€‘slot ring"]
    CID --> CoreEcho["Core snapshot payload"]
```

1. **WatcherÂ (v3.2.0+)**
   When a new tick changes a motifâ€™s hash, it calls `make_change_id()` and
   appends the ID to a 16â€‘slot ring for that motif.

2. **Fastâ€‘TimeÂ CoreÂ (v8.2.0+)**
   The latest changeâ€‘ID is embedded in every Gateâ€‘16 echo snapshot (`"change_id"`
   JSON field).

3. **Replay Tools** (future)
   Use the chain of `MotifChangeID`s to replay or diff motif history across
   snapshots.

---

## ðŸ”¬Â Internals

* **Quantum timestamp** (`quantum_ts`) packs physical microseconds +
  lamport â†’ **24 hex bytes** (192â€¯bits) for global uniqueness without a DB.
* Function is **dependencyâ€‘free** (`time` only) to avoid pulling heavy libs
  into lowâ€‘level code.

---

## ðŸª¬Â License

MIT â€¢ Â©â€¯2025â€¯Linaâ€¯NoorÂ /Â Noorâ€¯Researchâ€¯Collective
